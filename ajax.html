<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ajax</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>

<body>
    <p class="data"></p>
    <button type="button" class="btnAdd">연락처 추가</button>
    <button type="button" class="btnModify">연락처 수정</button>
    <button type="button" class="btnDelete">연락처 삭제</button>
    <script>
        /* 
            RESTful API
            Ajax
            비동기 통신을 위한 XMLHttpRequset 객체를 통한 서버와의 통신
            테스트를 위한 URL - http://sample.bmaster.kro.kr/
            GET, POST, DELETE, PUT
        */
        $(function () {
            var sampleURL = "http://sample.bmaster.kro.kr/contacts";

            // javascript에서의 Ajax 통신
            // var httpRequest = new XMLHttpRequest();
            // if (!httpRequest) {
            //     alert('Giving up :( Cannot create an XMLHTTP instance');
            //     return false;
            // }
            // httpRequest.onreadystatechange = consoleContents;
            // httpRequest.open("GET", sampleURL);
            // httpRequest.send();

            // function consoleContents() {
            //     if (httpRequest.readyState === XMLHttpRequest.DONE) {
            //         if (httpRequest.status === 200) {
            //             var parseObj = JSON.parse(httpRequest.responseText);
            //             console.log(parseObj);
            //         } else {
            //             console.log("통신 실패")
            //         }
            //     }
            // }

            // Jquery에서의 Ajax 통신
            // $.ajax({
            //         method: "GET",
            //         url: sampleURL,
            //         statusCode: {
            //             200: function () {
            //                 console.log("통신성공");
            //             }
            //         }
            //     }).done(function (data) {
            //         console.log(data)
            //     }).fail(function () {
            //         console.log("error");
            //     })
            //     .always(function () {
            //         console.log("complete");
            //     });

            // GET -> 데이터를 검색하여 해당 값을 받아 올때 사용
            // $.get(sampleURL, {
            //         pageno: 2,
            //         pagesize: 4
            //     }, function (data) {
            //         console.log(data);
            //         $(".data").append(JSON.stringify(data));
            //     }).done(function () {
            //         console.log("second success");
            //     })
            //     .fail(function () {
            //         console.log("error");
            //     })
            //     .always(function () {
            //         console.log("finished");
            //     });

            // POST -> 새롭게 데이터를 생성 할 때 사용
            // https://api.jquery.com/jQuery.post/#jQuery-post-url-data-success-dataType
            // $(".btnAdd").on("click", function(){
            //     var postData = {
            //         name: "테스트",
            //         tel: "010-1234-5678",
            //         address: "서울"
            //     }

            //     $.post(sampleURL, postData, function(data){
            //         console.log(data);
            //     });
            // });
            
            // PUT -> 데이터를 업데이트 할 때 사용
            // $(".btnModify").on("click", function(){
            //     var modifyData = {
            //         name: "데이터 수정",
            //         tel: "010-1234-567811",
            //         address: "서울"
            //     }

            //     $.ajax({
            //         method: "PUT",
            //         url: sampleURL+"/1568547997106",
            //         data: modifyData
            //     }).done(function (data) {
            //         console.log(data)
            //     });
            // });

            // DELETE –> 데이터를 삭제 할 때 사용
            // $(".btnDelete").on("click", function(){
            //     $.ajax({
            //         method: "DELETE",
            //         url: sampleURL+"/1568547997106",
            //     }).done(function (data) {
            //         console.log(data)
            //     });
            });
        })
    </script>
</body>

</html>